# Learn more about configuring your app at https://shopify.dev/docs/apps/tools/cli/configuration

name = "PreOrder Pro"
client_id = "YOUR_CLIENT_ID"
application_url = "https://shopmall.dpdns.org"
embedded = true

[access_scopes]
# Use this configuration to define the access scopes required for your app
scopes = "write_products,read_products,write_orders,read_orders,write_customers,read_customers,write_inventory,read_inventory,write_draft_orders,read_draft_orders"

[auth]
redirect_urls = [
  "https://shopmall.dpdns.org/api/auth/callback",
  "https://shopmall.dpdns.org/api/auth/shopify/callback"
]

[webhooks]
api_version = "2023-10"

[pos]
embedded = false

[build]
automatically_update_urls_on_dev = true
dev_store_url = "your-dev-store.com"
include_config_on_deploy = true

[app_proxy]
# App proxy configuration (if needed)
# url = "/apps/preorder-pro"
# subpath = "proxy"
# prefix = "apps"

# Extensions configuration
[[extensions]]
type = "theme_app_extension"
name = "preorder-embed"
handle = "preorder-embed"
directory = "extensions/preorder-embed"

[[extensions]]
type = "checkout_post_purchase"
name = "preorder-checkout"
handle = "preorder-checkout"

[[extensions]]
type = "product_subscription"
name = "preorder-subscription"
handle = "preorder-subscription"

# Web configuration
[web]
frontend = { command = "npm run dev", port = 3000 }
backend = { command = "npm run dev", port = 3000 }

[web.auth]
redirect_urls = [
  "https://shopmall.dpdns.org/api/auth/callback",
  "https://shopmall.dpdns.org/api/auth/shopify/callback"
]

[web.application_url]
url = "https://shopmall.dpdns.org"

[web.webhooks]
privacy_compliance_url = "https://shopmall.dpdns.org/api/webhooks/privacy/customers-data-request"
mandatory_webhooks_url = "https://shopmall.dpdns.org/api/webhooks"

# Legal pages (required by Shopify)
[web.legal]
privacy_policy_url = "https://shopmall.dpdns.org/privacy"
terms_of_service_url = "https://shopmall.dpdns.org/terms"
support_url = "https://shopmall.dpdns.org/support"
