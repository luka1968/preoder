# ğŸš€ æœ¬åœ°å¼€å‘å’Œéƒ¨ç½²å®Œæ•´æŒ‡å—

## âœ… é…ç½®å·²å®Œæˆ

æ‰€æœ‰å¯†é’¥å·²ç»é…ç½®åˆ°é¡¹ç›®ä¸­ï¼š

- âœ… `.env` - ç”Ÿäº§ç¯å¢ƒå˜é‡
- âœ… `.env.local` - æœ¬åœ°å¼€å‘å˜é‡
- âœ… `shopify.app.toml` - Shopify CLI é…ç½®

---

## ğŸ“‹ ç¬¬ä¸€æ­¥ï¼šå®‰è£…ä¾èµ–

### 1. å®‰è£…é¡¹ç›®ä¾èµ–

```bash
npm install
```

### 2. å®‰è£… Shopify CLI

```bash
npm install -g @shopify/cli @shopify/app
```

### 3. å®‰è£… Vercel CLI

```bash
npm install -g vercel
```

---

## ğŸ”§ ç¬¬äºŒæ­¥ï¼šæœ¬åœ°å¼€å‘

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# æ–¹æ³•1: ä½¿ç”¨ npm
npm run dev

# æ–¹æ³•2: ä½¿ç”¨ Shopify CLIï¼ˆæ¨èï¼‰
shopify app dev
```

è®¿é—®ï¼š`http://localhost:3000`

---

## ğŸš€ ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²åˆ° Vercel

### ä½¿ç”¨ Vercel CLI éƒ¨ç½²

```bash
# 1. ç™»å½• Vercel
vercel login

# 2. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
vercel --prod
```

### æˆ–ä½¿ç”¨è„šæœ¬

```bash
# Windows
vercel-deploy.bat

# é€‰æ‹©é€‰é¡¹ 3: éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
```

### éƒ¨ç½²åè®°å½• URL

ä¾‹å¦‚ï¼š`https://shopmall.dpdns.org`

---

## ğŸ“¦ ç¬¬å››æ­¥ï¼šéƒ¨ç½² Shopify æ‰©å±•

### 1. ç™»å½• Shopify

```bash
shopify auth login
```

### 2. éƒ¨ç½² App Embed æ‰©å±•

```bash
# è¿›å…¥æ‰©å±•ç›®å½•
cd extensions/preorder-embed

# éƒ¨ç½²æ‰©å±•
shopify app deploy

# è¿”å›é¡¹ç›®æ ¹ç›®å½•
cd ../..
```

### 3. ç¡®è®¤éƒ¨ç½²æˆåŠŸ

åœ¨ [Shopify Partners](https://partners.shopify.com/) åå°æŸ¥çœ‹ï¼š
- è¿›å…¥ä½ çš„ App
- ç‚¹å‡» "Extensions"
- åº”è¯¥èƒ½çœ‹åˆ° "PreOrder Pro" æ‰©å±•

---

## ğŸ§ª ç¬¬äº”æ­¥ï¼šæµ‹è¯•

### 1. å®‰è£… App åˆ°å¼€å‘åº—é“º

```bash
# ä½¿ç”¨ Shopify CLI
shopify app dev

# æˆ–åœ¨ Partners åå°æ‰‹åŠ¨å®‰è£…
```

### 2. å¯ç”¨ App Embed

1. è¿›å…¥ Shopify Admin
2. Online Store â†’ Themes â†’ Customize
3. ç‚¹å‡»å·¦ä¾§ "App embeds"
4. æ‰¾åˆ° "PreOrder Pro - é¢„è´­æ’ä»¶"
5. æ‰“å¼€å¼€å…³
6. Save

### 3. åˆ›å»ºæµ‹è¯•å•†å“

1. Products â†’ Add product
2. è®¾ç½®åº“å­˜ä¸º **0**
3. Save

### 4. è®¿é—®å•†å“é¡µé¢éªŒè¯

åº”è¯¥çœ‹åˆ°ï¼š
- âœ… é¢„è´­æŒ‰é’®ï¼ˆæ©™è‰²æ¸å˜ï¼‰
- âœ… é¢„è´­å¾½ç« ï¼ˆå›¾ç‰‡å³ä¸Šè§’ï¼‰
- âœ… åŸ"åŠ å…¥è´­ç‰©è½¦"æŒ‰é’®éšè—

### 5. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°

æŒ‰ F12ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
```
ğŸš€ PreOrder Pro App Embed Block Loaded
ğŸ“Š Config: {...}
âœ… PreOrder Universal Widget loaded via App Embed
âœ… Variant sold out via Shopify data
âœ… Preorder button inserted
ğŸ‰ PreOrder Widget initialized successfully!
```

---

## ğŸ”„ æ—¥å¸¸å¼€å‘æµç¨‹

### ä¿®æ”¹ä»£ç å

```bash
# 1. æµ‹è¯•æœ¬åœ°
npm run dev

# 2. éƒ¨ç½²åˆ° Vercel
vercel --prod

# 3. å¦‚æœä¿®æ”¹äº†æ‰©å±•ï¼Œé‡æ–°éƒ¨ç½²
cd extensions/preorder-embed
shopify app deploy
cd ../..
```

---

## ğŸ“ ç¯å¢ƒå˜é‡ç®¡ç†

### æœ¬åœ°å¼€å‘

ä½¿ç”¨ `.env.local`ï¼ˆå·²é…ç½®ï¼‰

### Vercel ç”Ÿäº§ç¯å¢ƒ

ä¸¤ç§æ–¹å¼è®¾ç½®ï¼š

#### æ–¹æ³•1: é€šè¿‡ Dashboard

1. è®¿é—® [Vercel Dashboard](https://vercel.com/dashboard)
2. é€‰æ‹©é¡¹ç›®
3. Settings â†’ Environment Variables
4. æ·»åŠ æ‰€æœ‰å˜é‡

#### æ–¹æ³•2: é€šè¿‡ CLI

```bash
# æ·»åŠ å•ä¸ªå˜é‡
vercel env add SHOPIFY_API_KEY production

# ä» .env æ–‡ä»¶å¯¼å…¥
vercel env pull .env.production
```

---

## ğŸ” å¸¸ç”¨å‘½ä»¤

### Shopify CLI

```bash
# æŸ¥çœ‹ç‰ˆæœ¬
shopify version

# ç™»å½•
shopify auth login

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
shopify app dev

# éƒ¨ç½²æ‰©å±•
shopify app deploy

# æŸ¥çœ‹ App ä¿¡æ¯
shopify app info

# æŸ¥çœ‹æ‰©å±•åˆ—è¡¨
shopify app extension list
```

### Vercel CLI

```bash
# æŸ¥çœ‹ç‰ˆæœ¬
vercel --version

# ç™»å½•
vercel login

# éƒ¨ç½²åˆ°é¢„è§ˆ
vercel

# éƒ¨ç½²åˆ°ç”Ÿäº§
vercel --prod

# æŸ¥çœ‹éƒ¨ç½²åˆ—è¡¨
vercel ls

# æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—
vercel logs

# æŸ¥çœ‹ç¯å¢ƒå˜é‡
vercel env ls
```

### NPM

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

---

## ğŸ› é—®é¢˜æ’æŸ¥

### é—®é¢˜1: Shopify CLI æ‰¾ä¸åˆ°é…ç½®

**è§£å†³æ–¹æ³•ï¼š**
```bash
# ç¡®è®¤ shopify.app.toml å­˜åœ¨
dir shopify.app.toml

# ç¡®è®¤ client_id å·²è®¾ç½®
type shopify.app.toml | findstr client_id
```

### é—®é¢˜2: ç¯å¢ƒå˜é‡æœªåŠ è½½

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æ£€æŸ¥ .env.local æ–‡ä»¶
type .env.local

# é‡å¯å¼€å‘æœåŠ¡å™¨
npm run dev
```

### é—®é¢˜3: æ‰©å±•éƒ¨ç½²å¤±è´¥

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æ£€æŸ¥æ‰©å±•é…ç½®
type extensions\preorder-embed\shopify.extension.toml

# é‡æ–°ç™»å½•
shopify auth logout
shopify auth login

# é‡æ–°éƒ¨ç½²
cd extensions\preorder-embed
shopify app deploy
```

### é—®é¢˜4: Vercel éƒ¨ç½²å¤±è´¥

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æ£€æŸ¥æ„å»ºæ—¥å¿—
vercel logs

# é‡æ–°ç™»å½•
vercel logout
vercel login

# é‡æ–°éƒ¨ç½²
vercel --prod
```

---

## ğŸ“Š é¡¹ç›®ç»“æ„

```
preorder-pro/
â”œâ”€â”€ .env                          # ç”Ÿäº§ç¯å¢ƒå˜é‡ âœ…
â”œâ”€â”€ .env.local                    # æœ¬åœ°å¼€å‘å˜é‡ âœ…
â”œâ”€â”€ shopify.app.toml              # Shopify CLI é…ç½® âœ…
â”œâ”€â”€ extensions/
â”‚   â””â”€â”€ preorder-embed/
â”‚       â”œâ”€â”€ shopify.extension.toml
â”‚       â”œâ”€â”€ blocks/
â”‚       â”‚   â””â”€â”€ app_embed.liquid
â”‚       â””â”€â”€ assets/
â”‚           â””â”€â”€ preorder-universal.js
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ shopify-integration.js    # ä¿®å¤åçš„è„šæœ¬ âœ…
â”‚   â””â”€â”€ universal-preorder.js     # App Embed ä½¿ç”¨ âœ…
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ install-script-tag.ts
â”‚       â””â”€â”€ uninstall-script-tag.ts
â””â”€â”€ vercel-deploy.bat             # éƒ¨ç½²è„šæœ¬ âœ…
```

---

## âœ… æ£€æŸ¥æ¸…å•

### é…ç½®å®Œæˆ
- [x] `.env` æ–‡ä»¶å·²é…ç½®
- [x] `.env.local` æ–‡ä»¶å·²é…ç½®
- [x] `shopify.app.toml` å·²æ›´æ–°
- [x] ä¾èµ–å·²å®‰è£…

### å¼€å‘ç¯å¢ƒ
- [ ] Shopify CLI å·²å®‰è£…
- [ ] Vercel CLI å·²å®‰è£…
- [ ] æœ¬åœ°æœåŠ¡å™¨å¯ä»¥å¯åŠ¨
- [ ] å¯ä»¥è®¿é—® localhost:3000

### éƒ¨ç½²
- [ ] Vercel éƒ¨ç½²æˆåŠŸ
- [ ] Shopify æ‰©å±•éƒ¨ç½²æˆåŠŸ
- [ ] App å·²å®‰è£…åˆ°å¼€å‘åº—é“º
- [ ] App Embed å·²å¯ç”¨

### æµ‹è¯•
- [ ] æµ‹è¯•å•†å“å·²åˆ›å»ºï¼ˆåº“å­˜=0ï¼‰
- [ ] é¢„è´­æŒ‰é’®æ˜¾ç¤ºæ­£å¸¸
- [ ] é¢„è´­å¾½ç« æ˜¾ç¤ºæ­£å¸¸
- [ ] ç‚¹å‡»åŠŸèƒ½æ­£å¸¸
- [ ] æ§åˆ¶å°æ— é”™è¯¯

---

## ğŸ‰ å®Œæˆï¼

ç°åœ¨ä½ å¯ä»¥ï¼š

1. **æœ¬åœ°å¼€å‘**ï¼š`npm run dev` æˆ– `shopify app dev`
2. **éƒ¨ç½²åˆ° Vercel**ï¼š`vercel --prod` æˆ–è¿è¡Œ `vercel-deploy.bat`
3. **éƒ¨ç½²æ‰©å±•**ï¼š`cd extensions/preorder-embed && shopify app deploy`
4. **æµ‹è¯•åŠŸèƒ½**ï¼šåœ¨å¼€å‘åº—é“ºåˆ›å»ºåº“å­˜ä¸º0çš„å•†å“

**æ‰€æœ‰é…ç½®å·²å®Œæˆï¼Œå¯ä»¥å¼€å§‹å¼€å‘å’Œéƒ¨ç½²äº†ï¼** ğŸš€

---

## âš ï¸ å®‰å…¨æé†’

**é‡è¦ï¼š** è¿™äº›å¯†é’¥å·²ç»åœ¨èŠå¤©ä¸­æ³„éœ²ï¼Œå»ºè®®ï¼š

1. éƒ¨ç½²å®Œæˆåï¼Œç«‹å³é‡æ–°ç”Ÿæˆæ‰€æœ‰å¯†é’¥
2. æ›´æ–° `.env` å’Œ `.env.local` æ–‡ä»¶
3. æ›´æ–° Vercel ç¯å¢ƒå˜é‡
4. æ›´æ–° `shopify.app.toml` ä¸­çš„ client_id

**æ°¸è¿œä¸è¦åœ¨å…¬å…±åœºåˆåˆ†äº«å¯†é’¥ï¼** ğŸ”’
