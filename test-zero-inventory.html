<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åº“å­˜ä¸ºé›¶æµ‹è¯• - PreOrder Pro</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
      background: #f5f5f5;
    }
    .test-container {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    h1 {
      color: #333;
      margin-bottom: 10px;
    }
    .subtitle {
      color: #666;
      margin-bottom: 30px;
    }
    .test-case {
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
    }
    .test-case h3 {
      margin-top: 0;
      color: #ff6b35;
    }
    .product-mock {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }
    .product-image {
      position: relative;
      background: #f0f0f0;
      height: 300px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #999;
    }
    .product-info {
      padding: 20px;
    }
    .product-title {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .product-price {
      font-size: 20px;
      color: #333;
      margin-bottom: 20px;
    }
    button[name="add"] {
      width: 100%;
      padding: 15px;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 10px;
    }
    button[name="add"]:disabled {
      background: #ccc;
      color: #666;
      cursor: not-allowed;
    }
    .variant-select {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ddd;
      border-radius: 6px;
    }
    .status-badge {
      display: inline-block;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
      margin-left: 10px;
    }
    .status-success {
      background: #d4edda;
      color: #155724;
    }
    .status-error {
      background: #f8d7da;
      color: #721c24;
    }
    .code-block {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      overflow-x: auto;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>ğŸ§ª åº“å­˜ä¸ºé›¶é¢„è´­æŒ‰é’®æµ‹è¯•</h1>
    <p class="subtitle">æµ‹è¯•ä¸åŒåº“å­˜çŠ¶æ€ä¸‹é¢„è´­æŒ‰é’®çš„æ˜¾ç¤ºæƒ…å†µ</p>
    
    <div style="background: #fff3cd; padding: 15px; border-radius: 6px; margin-bottom: 20px;">
      <strong>âš ï¸ æµ‹è¯•è¯´æ˜ï¼š</strong>
      <ul style="margin: 10px 0 0 0; padding-left: 20px;">
        <li>æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ¨¡æ‹Ÿä¸åŒçš„åº“å­˜çŠ¶æ€</li>
        <li>é¢„è´­æŒ‰é’®åº”è¯¥åœ¨åº“å­˜ä¸º0æ—¶è‡ªåŠ¨æ˜¾ç¤º</li>
        <li>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†æ—¥å¿—</li>
      </ul>
    </div>
  </div>

  <!-- æµ‹è¯•ç”¨ä¾‹1: available = false -->
  <div class="test-container">
    <div class="test-case">
      <h3>æµ‹è¯•ç”¨ä¾‹ 1: available = false <span class="status-badge status-success">åº”æ˜¾ç¤ºé¢„è´­</span></h3>
      <p>å˜ä½“çš„ <code>available</code> å­—æ®µä¸º <code>false</code></p>
      
      <div class="product-mock">
        <div class="product-image" id="image-1">
          <span>äº§å“å›¾ç‰‡</span>
        </div>
        <div class="product-info">
          <div class="product-title">æµ‹è¯•å•†å“ 1</div>
          <div class="product-price">Â¥99.00</div>
          <select name="id" class="variant-select">
            <option value="test-variant-1">é»˜è®¤å˜ä½“</option>
          </select>
          <button name="add" disabled>å”®ç½„</button>
        </div>
      </div>
      
      <div class="code-block">
window.meta = {
  product: {
    id: 'test-product-1',
    variants: [{
      id: 'test-variant-1',
      available: false,
      inventory_quantity: 0
    }]
  }
}
      </div>
    </div>
  </div>

  <!-- æµ‹è¯•ç”¨ä¾‹2: inventory_quantity = 0 -->
  <div class="test-container">
    <div class="test-case">
      <h3>æµ‹è¯•ç”¨ä¾‹ 2: inventory_quantity = 0 <span class="status-badge status-success">åº”æ˜¾ç¤ºé¢„è´­</span></h3>
      <p>å˜ä½“çš„ <code>inventory_quantity</code> ä¸º <code>0</code></p>
      
      <div class="product-mock">
        <div class="product-image" id="image-2">
          <span>äº§å“å›¾ç‰‡</span>
        </div>
        <div class="product-info">
          <div class="product-title">æµ‹è¯•å•†å“ 2</div>
          <div class="product-price">Â¥149.00</div>
          <select name="id" class="variant-select">
            <option value="test-variant-2">é»˜è®¤å˜ä½“</option>
          </select>
          <button name="add" disabled>ç¼ºè´§</button>
        </div>
      </div>
      
      <div class="code-block">
window.meta = {
  product: {
    id: 'test-product-2',
    variants: [{
      id: 'test-variant-2',
      available: true,
      inventory_quantity: 0,
      inventory_management: 'shopify'
    }]
  }
}
      </div>
    </div>
  </div>

  <!-- æµ‹è¯•ç”¨ä¾‹3: è´Ÿåº“å­˜ -->
  <div class="test-container">
    <div class="test-case">
      <h3>æµ‹è¯•ç”¨ä¾‹ 3: inventory_quantity = -5 <span class="status-badge status-success">åº”æ˜¾ç¤ºé¢„è´­</span></h3>
      <p>å˜ä½“çš„ <code>inventory_quantity</code> ä¸ºè´Ÿæ•°</p>
      
      <div class="product-mock">
        <div class="product-image" id="image-3">
          <span>äº§å“å›¾ç‰‡</span>
        </div>
        <div class="product-info">
          <div class="product-title">æµ‹è¯•å•†å“ 3</div>
          <div class="product-price">Â¥199.00</div>
          <select name="id" class="variant-select">
            <option value="test-variant-3">é»˜è®¤å˜ä½“</option>
          </select>
          <button name="add" disabled>Sold out</button>
        </div>
      </div>
      
      <div class="code-block">
window.meta = {
  product: {
    id: 'test-product-3',
    variants: [{
      id: 'test-variant-3',
      available: false,
      inventory_quantity: -5,
      inventory_management: 'shopify'
    }]
  }
}
      </div>
    </div>
  </div>

  <!-- æµ‹è¯•ç”¨ä¾‹4: æœ‰åº“å­˜ï¼ˆä¸åº”æ˜¾ç¤ºé¢„è´­ï¼‰ -->
  <div class="test-container">
    <div class="test-case">
      <h3>æµ‹è¯•ç”¨ä¾‹ 4: inventory_quantity = 10 <span class="status-badge status-error">ä¸åº”æ˜¾ç¤ºé¢„è´­</span></h3>
      <p>å˜ä½“æœ‰åº“å­˜ï¼Œ<code>inventory_quantity = 10</code></p>
      
      <div class="product-mock">
        <div class="product-image" id="image-4">
          <span>äº§å“å›¾ç‰‡</span>
        </div>
        <div class="product-info">
          <div class="product-title">æµ‹è¯•å•†å“ 4</div>
          <div class="product-price">Â¥79.00</div>
          <select name="id" class="variant-select">
            <option value="test-variant-4">é»˜è®¤å˜ä½“</option>
          </select>
          <button name="add" style="background: #28a745; color: white;">åŠ å…¥è´­ç‰©è½¦</button>
        </div>
      </div>
      
      <div class="code-block">
window.meta = {
  product: {
    id: 'test-product-4',
    variants: [{
      id: 'test-variant-4',
      available: true,
      inventory_quantity: 10,
      inventory_management: 'shopify'
    }]
  }
}
      </div>
    </div>
  </div>

  <!-- æ¨¡æ‹ŸShopifyç¯å¢ƒ -->
  <script>
    // æ¨¡æ‹ŸShopifyå…¨å±€å¯¹è±¡
    window.Shopify = {
      shop: 'test-shop.myshopify.com'
    };

    // è®¾ç½®ä¸åŒæµ‹è¯•ç”¨ä¾‹çš„äº§å“æ•°æ®
    // è¿™é‡Œæˆ‘ä»¬ä¼šåœ¨åŠ è½½è„šæœ¬å‰è®¾ç½®
    console.log('ğŸ§ª æµ‹è¯•ç¯å¢ƒåˆå§‹åŒ–å®Œæˆ');
    console.log('ğŸ“¦ Shopifyå¯¹è±¡:', window.Shopify);
  </script>

  <!-- åŠ è½½ä¿®å¤åçš„é¢„è´­è„šæœ¬ -->
  <script src="/shopify-integration.js"></script>

  <!-- æµ‹è¯•ç»“æœéªŒè¯ -->
  <script>
    setTimeout(() => {
      console.log('='.repeat(50));
      console.log('ğŸ” éªŒè¯æµ‹è¯•ç»“æœ');
      console.log('='.repeat(50));
      
      // æ£€æŸ¥æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹
      for (let i = 1; i <= 4; i++) {
        const container = document.querySelectorAll('.test-case')[i-1];
        const preorderBtn = container.querySelector('.preorder-btn');
        const badge = document.querySelector(`#image-${i} .preorder-badge`);
        
        const shouldShow = i <= 3; // å‰3ä¸ªåº”è¯¥æ˜¾ç¤ºé¢„è´­
        const hasButton = !!preorderBtn;
        const hasBadge = !!badge;
        
        const status = (shouldShow === hasButton) ? 'âœ…' : 'âŒ';
        
        console.log(`æµ‹è¯•ç”¨ä¾‹ ${i}: ${status}`);
        console.log(`  - åº”æ˜¾ç¤ºé¢„è´­: ${shouldShow}`);
        console.log(`  - å®é™…æ˜¾ç¤ºæŒ‰é’®: ${hasButton}`);
        console.log(`  - å®é™…æ˜¾ç¤ºå¾½ç« : ${hasBadge}`);
        
        if (shouldShow !== hasButton) {
          console.error(`  âš ï¸ æµ‹è¯•å¤±è´¥ï¼é¢„æœŸ${shouldShow ? 'æ˜¾ç¤º' : 'ä¸æ˜¾ç¤º'}é¢„è´­æŒ‰é’®`);
        }
      }
      
      console.log('='.repeat(50));
    }, 2000);
  </script>

  <!-- ä¸ºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹è®¾ç½®ç‹¬ç«‹çš„äº§å“æ•°æ® -->
  <script>
    // ç”±äºæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªäº§å“è®¾ç½®ä¸åŒçš„æ•°æ®ï¼Œ
    // æˆ‘ä»¬éœ€è¦ä¿®æ”¹è„šæœ¬ä»¥æ”¯æŒå¤šä¸ªäº§å“
    // è¿™é‡Œå…ˆè®¾ç½®ç¬¬ä¸€ä¸ªäº§å“çš„æ•°æ®
    window.meta = {
      product: {
        id: 'test-product-1',
        variants: [{
          id: 'test-variant-1',
          available: false,
          inventory_quantity: 0
        }]
      }
    };
  </script>
</body>
</html>
